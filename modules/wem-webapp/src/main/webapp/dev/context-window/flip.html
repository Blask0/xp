<html>
<head>
    <title>Enonic WEM Admin</title>
    <link rel="stylesheet" type="text/css" href="../../admin/resources/lib/ext/resources/css/admin.css">

    <style>
        #container {
            position: relative;
            margin: 10px auto;
            -webkit-perspective: 1000px;
            perspective: 1000px;
        }

        #card {
            width: 100%;
            height: 100%;
            -webkit-transform-style: preserve-3d;
            -webkit-transition: all 500ms linear;
            transform-style: preserve-3d;
            transition: all 500ms linear;
        }
        
        #container.hover-effect #card {
            -webkit-transform: rotateY(180deg);
            transform: rotateY(180deg);
        }

        .face {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: auto;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            background-color: #000;
            border: 1px solid #000;
            color: #ccc;

        }

        .face.back {
            display: block;
            -webkit-transform: rotateY(180deg);
            -webkit-box-sizing: border-box;
            transform: rotateY(180deg);
            box-sizing: border-box;
            background-color: #ccc;
            color: #000;
        }
    </style>

    <script type="text/javascript" src="../../admin/resources/lib/ext/ext-all-debug.js"></script>

    <script type="text/javascript">
        Ext.Loader.setConfig({
            enabled: true,
            disableCaching: true,
            paths: {
                'Admin': '../../admin/resources/app'
            }
        });
    </script>

    <script type="text/javascript">
        // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

        var treeStore = Ext.create('Ext.data.TreeStore', {
            root: {
                expanded: true,
                children: [
                    { text: "detention", leaf: true },
                    { text: "homework", expanded: true, children: [
                        { text: "book report", leaf: true },
                        { text: "algebra", leaf: true}
                    ] },
                    { text: "buy lottery tickets", leaf: true }
                ]
            }
        });

        Ext.define('Image', {
            extend: 'Ext.data.Model',
            fields: [
                { name:'src', type:'string' },
                { name:'caption', type:'string' }
            ]
        });

        Ext.create('Ext.data.Store', {
            id:'imagesStore',
            model: 'Image',
            data: [
                { src:'http://www.sencha.com/img/20110215-feat-drawing.png', caption:'Drawing & Charts' },
                { src:'http://www.sencha.com/img/20110215-feat-data.png', caption:'Advanced Data' },
                { src:'http://www.sencha.com/img/20110215-feat-html5.png', caption:'Overhauled Theme' },
                { src:'http://www.sencha.com/img/20110215-feat-perf.png', caption:'Performance Tuned' }
            ]
        });

        var imageTpl = new Ext.XTemplate(
                '<tpl for=".">',
                '   <div style="margin-bottom: 10px;" class="thumb-wrap">',
                '       <img src="{src}" />',
                '       <br/><span>{caption}</span>',
                '   </div>',
                '</tpl>'
        );

        // App
        Ext.application({
            name: 'App',

            controllers: [
            ],

            requires: [
            ],

            launch: function () {
                Ext.create('Ext.container.Viewport', {
                    layout: 'border',
                    items: [
                        {
                            region: 'center',
                            flex: 1,
                            split: true,
                            padding: '0',
                            autoScroll: true,
                            tbar: [
                                {
                                    text: 'Toggle Flip',
                                    handler: function () {
                                        //container
                                        //hover-effect
                                        var ct = Ext.get('container');
                                        if (!ct.hasCls('hover-effect')) {
                                            ct.addCls('hover-effect');
                                        } else {
                                            ct.removeCls('hover-effect');
                                        }
                                    }
                                },
                            ],
                            items: [
                                {
                                    xtype: 'component',
                                    id: 'live-edit-iframe-container',
                                    style: 'height: 100%; text-align: center; background-color: #ccc',
                                    html: '<iframe id="live-edit-iframe" style="border:0;width: 100%; height: 100%" src="../live-edit-page/bootstrap.jsp?edit=true"></iframe>',
                                    listeners: {
                                        render: function () {
                                            var container = new Ext.container.Container ({
                                                floating: true,
                                                shadow: false,
                                                padding: '50 0 50 0',

                                                items: [
                                                    {
                                                        xtype: 'container',
                                                        id: 'container',
                                                        width: 400,
                                                        height: 400,

                                                        cls: 'hover',
                                                        shadow: false,
                                                        items: [
                                                            {
                                                                xtype: 'container',
                                                                id: 'card',
                                                                shadow: false,
                                                                items: [
                                                                    {
                                                                        xtype: 'container',
                                                                        cls: 'face',
                                                                        items: [
                                                                            new Ext.view.View({
                                                                                store: Ext.data.StoreManager.lookup('imagesStore'),
                                                                                tpl: imageTpl,
                                                                                itemSelector: 'div.thumb-wrap',
                                                                                emptyText: 'No images available'
                                                                            })
                                                                        ]
                                                                    },
                                                                    {
                                                                        xtype: 'container',
                                                                        cls: 'back face',
                                                                        items: [
                                                                            new Ext.tree.Panel({
                                                                                title: 'Simple Tree',
                                                                                border: false,
                                                                                height: 398,
                                                                                store: treeStore,
                                                                                rootVisible: false
                                                                            })
                                                                        ]
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    }
                                                ]

                                            });
                                            container.show();
                                        }
                                    }
                                }
                            ]
                        }
                    ]
                });
            }

        });



    </script>

</head>
<body>
<!-- -->
</body>
</html>
