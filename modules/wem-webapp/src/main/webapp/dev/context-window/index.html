<html>
<head>
    <title>Enonic WEM Admin</title>
    <link rel="stylesheet" type="text/css" href="../../admin/resources/lib/ext/resources/css/admin.css">
    <link rel="stylesheet" type="text/css" href="css/context-window.css">
    <link rel="stylesheet" type="text/css" href="css/components.css">
    <link rel="stylesheet" type="text/css" href="css/device-selector.css">
    <script type="text/javascript" src="../../admin/resources/lib/ext/ext-all-debug.js"></script>

    <script type="text/javascript" charset="UTF-8" src="../../admin2/live-edit/lib/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" charset="UTF-8"
            src="../../admin2/live-edit/lib/jquery-ui-1.9.2.custom.min.js"></script>
    <script type="text/javascript" charset="UTF-8" src="../../admin2/live-edit/lib/jquery.simulate.js"></script>

    <script type="text/javascript">
        // Patch for making the components list always draggable
        (function ($) {
            $.fn.liveDraggable = function (opts) {
                this.live("mouseover", function () {
                    if (!$(this).data("init")) {
                        $(this).data("init", true).draggable(opts);
                    }
                });
                return this;
            };
        }(jQuery));
    </script>

    <script type="text/javascript"
            src="../../admin2/apps/content-manager/js/view/contextwindow/ContextWindow.js"></script>
    <script type="text/javascript" src="../../admin2/apps/content-manager/js/view/contextwindow/Components.js"></script>
    <script type="text/javascript"
            src="../../admin2/apps/content-manager/js/view/contextwindow/DeviceSelector.js"></script>
    <script type="text/javascript" src="../../admin2/apps/content-manager/js/view/contextwindow/Images.js"></script>

    <script type="text/javascript">

        // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
        // App
        // Map jQuery served with Live Edit
        Ext.application({
            name: 'App',

            controllers: [
            ],

            requires: [
            ],

            launch: function () {
                Ext.create('Ext.container.Viewport', {
                    layout: 'border',
                    items: [
                        {
                            region: 'center',
                            flex: 1,
                            split: true,
                            padding: '0',
                            autoScroll: true,
                            tbar: [
                                {
                                    text: 'Save'
                                },
                                {
                                    text: 'Preview'
                                },
                                {
                                    text: 'Publish'
                                }
                            ],
                            items: [
                                {
                                    xtype: 'component',
                                    id: 'live-edit-iframe-container',
                                    style: 'height: 100%; text-align: center; background-color: #ccc',
                                    html: '<iframe id="live-edit-iframe" style="border:0;width: 100%; height: 100%" src="../live-edit-page/bootstrap.jsp?edit=true"></iframe>'
                                }
                            ]
                        }
                    ]
                });
            }

        });

    </script>

</head>
<body>
</body>
</html>
