<html>
<head>
    <title>Enonic WEM Admin</title>
    <link rel="stylesheet" type="text/css" href="../admin/resources/lib/ext/resources/css/admin.css">
    <link rel="stylesheet" type="text/css" href="../admin/resources/css/contextwindow/context-window.css">
    <link rel="stylesheet" type="text/css" href="../admin/resources/css/contextwindow/screen/shared.css">
    <link rel="stylesheet" type="text/css" href="../admin/resources/css/contextwindow/screen/component-type-list.css">
    <link rel="stylesheet" type="text/css" href="../admin/resources/css/contextwindow/screen/component-list.css">
    <link rel="stylesheet" type="text/css" href="../admin/resources/css/contextwindow/screen/emulator.css">
    <link rel="stylesheet" type="text/css" href="../admin/resources/css/contextwindow/inspector.css">
    <link rel="stylesheet" type="text/css" href="../admin/resources/css/contextwindow/drag-helper.css">
    <style type="text/css">
        iframe {
            /* fixme: move to CSS file */
            box-shadow: rgba(0, 0, 0, 0.2) 0 0 10px;
        }
    </style>

    <script type="text/javascript" src="../admin/resources/lib/ext/ext-all-debug.js"></script>

    <script type="text/javascript" charset="UTF-8" src="../admin2/live-edit/lib/jquery-1.9.1.js"></script>
    <script type="text/javascript" charset="UTF-8"
            src="../admin2/live-edit/lib/jquery-ui-1.10.3.custom.min.js"></script>

    <script type="text/javascript" charset="UTF-8" src="../admin2/live-edit/lib/jquery.simulate.js"></script>
    <script type="text/javascript" charset="UTF-8" src="../admin2/live-edit/lib/jquery.ui.live-draggable.js"></script>

    <script type="text/javascript">
        Ext.Loader.setConfig({
            enabled: true,
            disableCaching: true,
            paths: {
                'Admin': '/admin/resources/app'
            }
        });
    </script>

    <script type="text/javascript">
        // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
        // App
        Ext.application({
            name: 'App',

            controllers: [
            ],

            requires: [
                'Admin.view.contentManager.contextwindow.ContextWindow'
            ],

            launch: function () {
                Ext.create('Ext.container.Viewport', {
                    layout: 'border',
                    items: [
                        {
                            region: 'center',
                            flex: 1,
                            split: true,
                            padding: '0',
                            autoScroll: true,
                            tbar: [
                                {
                                    text: 'Save'
                                },
                                {
                                    text: 'Preview'
                                },
                                {
                                    text: 'Publish'
                                }
                            ],
                            items: [
                                {
                                    xtype: 'component',
                                    id: 'live-edit-iframe-container',
                                    style: 'height: 100%; text-align: center; background-color: #ccc',
                                    html: '<iframe id="live-edit-iframe" style="border:0;width: 100%; height: 100%" src="live-edit-page/bootstrap.jsp?edit=true"></iframe>',
                                    listeners: {
                                        render: function () {
                                            Ext.get('live-edit-iframe').on('load', function () {

                                                var contextWindow = new Admin.view.contentManager.contextwindow.ContextWindow({
                                                    liveEditIFrameDom: Ext.get('live-edit-iframe').dom,
                                                    y: 40
                                                });
                                                contextWindow.doShow();
                                            });
                                        }
                                    }
                                }
                            ]
                        }
                    ]
                });
            }

        });



    </script>

</head>
<body>
<!-- -->
</body>
</html>
