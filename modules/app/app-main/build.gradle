apply from: "$rootDir/gradle/admin-app.gradle"

dependencies {
    include project( ":lib:lib-admin" )
    include project( ":lib:lib-mustache" )
    include project( ":lib:lib-portal" )
    include project( ":lib:lib-auth" )
}

ext {
    resourcesDir = file( 'src/main/resources' )
    buildResourcesDir = file( "${buildDir}/resources/main" )
}

bundle {
    instruction 'Bundle-Name', 'Admin Main App'
    instruction 'X-Bundle-Type', 'system'
    instruction 'X-Source-Paths', "$resourcesDir, $buildResourcesDir"
}

task gulpAll( type: GulpTask, dependsOn: npmInstall ) {
    description = 'Build UI resources (css, etc).'
    inputs.dir 'src/main/resources'
    outputs.dir 'build/resources/main'
    args = ['all']
}

jar.dependsOn += gulpAll
jar.outputs.dir "${buildDir}/resources/main"
